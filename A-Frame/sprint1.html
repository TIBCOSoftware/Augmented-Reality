<!DOCTYPE html>
<html>

<head>
    <title>A-Frame: Quest movement and interaction</title>
    <meta name="description" content="TIBCO VR training">
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="js/aframe-environment-component.js"></script>
    <script src="js/controller-listener.js"></script>
    <script src="js/player-move.js"></script>
    <script src="js/raycaster-extras.js"></script>
</head>

<body>


<a-scene environment="preset: tron;dressing: none" renderer="antialias: true;">

    <a-assets>
        <img id="gradient" src="images/gradient-fade.png" />
    </a-assets>

    <!-- use a simple mesh for raycasting/navigation -->
    <a-plane
        width="100" height="100"
        rotation="-90 0 0"
        position="0 0.01 0"
        visible="false"
        class="groundPlane"
        raycaster-target>
    </a-plane>

    <a-entity
        id="player"
        position="0 0 0"
        player-move="controllerListenerId: #controller-data;
                     navigationMeshClass: groundPlane;">
        <a-camera></a-camera>

        <a-entity
            id="controller-data"
            controller-listener="leftControllerId:  #left-controller;
                                 rightControllerId: #right-controller;">
        </a-entity>

        <a-entity
            id="left-controller"
            oculus-touch-controls="hand: left">
        </a-entity>

        <!-- experiment with raycasting interval; slight performance improvement but jittery appearance in world -->
        <a-entity
            id="right-controller"
            oculus-touch-controls="hand: right"
            raycaster="objects: .raycaster-target; interval: 0;"
            raycaster-extras="controllerListenerId: #controller-data;
                              beamImageSrc: #gradient; beamLength: 0.5;">
        </a-entity>

    </a-entity>


  <a-entity position = "1 5 0"  light="type: directional; color: #BBB; target:#table; castShadow:true "></a-entity>

   <a-cylinder id="table1" shadow="receive: true" color="#284a9e" height="1" radius="0.5" position="0 0.5 -2"></a-cylinder>
   <a-cylinder id="table2" shadow="receive: true" color="#284a9e" height="1" radius="0.5" position="3 0.5 -4"></a-cylinder>
   <a-cylinder id="table3" shadow="receive: true" color="#284a9e" height="1" radius="0.5" position="-3 0.5 -4"></a-cylinder>

</a-scene>

</body>
</html>
